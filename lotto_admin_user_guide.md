# Lotto Admin Bot - 사용자 가이드

## 명령어 설명 (Command Description)

### 1. `/lotto_draw_start`
- **설명:** 새로운 로또 회차를 시작합니다. 관리자 전용 명령어입니다.
- **사용 방법:** `/lotto_draw_start`
- **동작:** 새로운 회차 번호가 생성되고, 관리자에게 시작 완료 메시지를 표시합니다.

### 2. `/lotto_draw_close`
- **설명:** 현재 진행 중인 로또 회차를 강제로 마감합니다. 당첨 번호는 아직 지정되지 않은 상태입니다. 관리자 전용 명령어입니다.
- **사용 방법:** `/lotto_draw_close`
- **동작:** 현재 오픈된 회차를 마감 처리합니다.

### 3. `/lotto_result`
- **설명:** 현재 회차 로또 당첨자 발표를 진행합니다.
- **사용 방법:** `/lotto_result prize1:50000 prize2:30000 prize3:10000`
- **동작:** 3개의 당첨 번호와 1개의 보너스 번호를 무작위로 뽑아 당첨자를 확인하고 상금을 지급합니다.

### 4. `/lotto_result_debug`
- **설명:** 디버그용 당첨 발표. 원하는 당첨 번호와 보너스 번호를 지정할 수 있습니다.
- **사용 방법:** `/lotto_result_debug nums:1,2,3 bonus:4 prize1:50000 prize2:30000 prize3:10000`
- **동작:** 입력된 번호를 기반으로 당첨자를 확인하고 결과를 표시합니다.

### 5. `/lotto_current_draw`
- **설명:** 현재 최신 로또 회차 정보를 조회합니다.
- **사용 방법:** `/lotto_current_draw`
- **동작:** 현재 회차 번호, 상태, 당첨번호(미정 가능), 생성일, 마감일을 확인할 수 있습니다.

### 6. `/lotto_draw_list`
- **설명:** 최근 로또 회차 목록을 조회합니다.
- **사용 방법:** `/lotto_draw_list limit:5`
- **동작:** 지정한 개수만큼 최근 회차 정보를 조회하고 상태와 당첨번호를 표시합니다.

## 로직 설명 (Logic Overview)

1. 관리자가 `/lotto_draw_start` 명령어로 새로운 회차를 시작합니다.
2. 사용자는 회차가 시작된 후 로또를 구매합니다 (DB 저장).
3. 관리자가 `/lotto_draw_close` 명령어로 회차를 마감할 수 있습니다.
4. `/lotto_result` 명령어 실행 시, 3개의 당첨 번호와 1개의 보너스 번호가 무작위로 선택됩니다.
5. 각 로또 구매 내역과 당첨 번호를 비교하여 등수를 판별합니다.
6. 당첨자에게 등수와 상금을 DB에 기록하고, 결과 메시지를 관리자에게 표시합니다.
7. `/lotto_result_debug`는 직접 당첨 번호를 지정하여 테스트용 결과를 생성할 수 있습니다.
8. `/lotto_current_draw` 및 `/lotto_draw_list` 명령어를 통해 최신 및 최근 회차 정보를 조회할 수 있습니다.

## 예상 출력 결과 (Expected Output)

### 1. `/lotto_draw_start` 실행 예시
```
🆕 123차 로또 회차가 시작되었습니다!
```

### 2. `/lotto_draw_close` 실행 예시
```
🔒 123차 로또 회차가 마감되었습니다.
```

### 3. `/lotto_result` 실행 예시
```
🎉 **로또 123차 당첨 결과** 🎉
✨ 당첨 번호: [5, 12, 23]
⭐ 보너스 번호: 7

🎯 <@123456789> [5,12,23] → 1등 당첨! 상금: 50000원
🎯 <@987654321> [5,12,7] → 2등 당첨! 상금: 30000원
```

### 4. `/lotto_result_debug` 실행 예시
```
🎉 **[DEBUG] 로또 123차 당첨 결과** 🎉
✨ 당첨 번호: [1, 2, 3]
⭐ 보너스 번호: 4

🎯 <@123456789> [1,2,4] → 2등 당첨! 상금: 30000원
```

### 5. `/lotto_current_draw` 실행 예시
```
📌 **123차 회차 정보**
- 상태: open
- 당첨번호: 미정
- 생성일: 2025-10-30
- 마감일: 미정
```

### 6. `/lotto_draw_list` 실행 예시
```
📊 **최근 로또 회차 목록**
- 123차 | 상태: open | 당첨번호: 미정 | 생성일: 2025-10-30 | 마감일: 미정
- 122차 | 상태: closed | 당첨번호: [5,12,23] | 생성일: 2025-10-23 | 마감일: 2025-10-29
- 121차 | 상태: closed | 당첨번호: [3,7,19] | 생성일: 2025-10-16 | 마감일: 2025-10-22
```