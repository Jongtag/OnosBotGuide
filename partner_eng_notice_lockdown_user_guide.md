# 📘 OnosBot 기능 가이드: Paring & Notice Lockdown

이 가이드는 **Paring(페어링)** 기능과 **Notice Lockdown(공지 필독)** 기능에 대한 사용법을 안내합니다.

---

## 🤝 Paring (페어링) 기능

**Paring**은 사용자 간의 1:1 매칭을 도와주는 기능입니다. 특정 요일과 시간에 신청하면, 같은 시간에 신청한 다른 사용자와 랜덤으로 매칭해 줍니다.

### 👤 일반 사용자용 (Users)

#### 1. 신청하기 (`/paring_apply`)
진행 중인 회차에 참여하려면 신청 명령어를 사용하세요.
- **사용법**: `/paring_apply` 입력
- **입력 항목**:
  - **요일**: 월, 화, 수, 목, 금, 토, 일 중 하나 입력
  - **시간**: 24시간 형식 (예: `20:00`, `22:30`)
    - *참고: 시간은 30분 단위로만 입력 가능합니다.*
- **완료**: 신청이 완료되면 "✅ 신청 완료" 메시지가 뜹니다.

#### 2. 신청 내역 및 히스토리 확인 (`/paring_my`)
자신의 현재 신청 내역과 과거 매칭 기록을 확인할 수 있습니다.
- **사용법**: `/paring_my` 입력
- **기능**:
  - **현재 회차 신청**: 이번 회차에 내가 신청한 요일/시간 목록을 보여줍니다.
  - **매칭 히스토리**: 과거에 누구와 언제 매칭되었는지 기록을 볼 수 있습니다. (페이지 넘기기 가능)
  - **신청 취소**: [신청 취소] 버튼을 눌러 잘못 신청한 내역을 삭제할 수 있습니다.

#### 3. 매칭 알림 & 리마인더
- 매칭이 성사되면 봇이 **DM(다이렉트 메시지)** 으로 매칭된 파트너와 시간을 알려줍니다.
- 약속 시간 **30분 전**에 다시 한번 알림 DM을 보내드립니다.

---

### 🛡️ 관리자용 (Admins)

#### 1. 회차 시작 (`/paring_start`)
새로운 Paring 모집을 시작합니다.
- **사용법**: `/paring_start [end_date]`
  - `end_date`: 마감일 (옵션, 입력하지 않으면 7일 후로 자동 설정, 예: `2024-02-20`)
- **효과**: 새로운 회차가 생성되고 유저들이 신청할 수 있는 상태가 됩니다.

#### 2. 회차 마감 (`/paring_close`)
현재 진행 중인 모집을 마감합니다.
- **사용법**: `/paring_close`
- **효과**: 더 이상 신청을 받지 않으며, 매칭을 진행할 준비 상태가 됩니다.

#### 3. 매칭 실행 (`/paring_match`)
마감된 회차의 신청자들을 매칭합니다.
- **사용법**: `/paring_match [round_no]`
  - `round_no`: 매칭할 회차 번호 (생략 시 가장 최근 마감된 회차)
- **효과**:
  - 같은 요일/시간에 신청한 유저들을 랜덤 1:1 매칭합니다.
  - 매칭 결과가 저장되고, 당사자들에게 DM이 발송됩니다.
  - 남는 인원이 있어 매칭되지 못한 경우 대기 상태로 남거나 다음 기회를 노려야 합니다.

---

## 🚨 Notice Lockdown (공지 필독) 기능

**Notice Lockdown**은 중요한 공지사항이 있을 때, 사용자들이 공지를 확인하기 전까지 다른 채널을 이용하지 못하게 하는 기능입니다.

### 👤 일반 사용자용 (Users)

#### 1. 잠금 상황 발생 시
- 관리자가 중요 공지를 올리면, 공지 채널을 제외한 **모든 채널이 안 보이게 됩니다.**
- 공지 채널에 올라온 **"🚨 필독 공지"** 메시지를 확인하세요.

#### 2. 잠금 해제 방법
- 공지 메시지 하단에 있는 **[✅ 확인했습니다]** 버튼을 클릭하세요.
- 클릭 즉시 **"확인된 유저"** 역할이 부여되며, 다시 모든 채널을 정상적으로 이용할 수 있습니다.

---

### 🛡️ 관리자용 (Admins)

#### 1. 긴급 공지 및 잠금 실행 (`/notice_critical`)
- **사용법**: `/notice_critical [content]`
  - `content`: 공지할 내용
- **동작 원리**:
  - `@everyone` 권한을 수정하여 지정된 카테고리(또는 전체)의 채널을 안 보이게 처리합니다.
  - `확인된 유저` 역할은 채널을 볼 수 있도록 설정합니다.
  - 공지 메시지와 함께 [확인] 버튼을 전송합니다.

#### 2. 잠금 상황 종료 (`/notice_end`)
- **사용법**: `/notice_end`
- **동작 원리**:
  - 변경했던 채널 권한을 복구하여 모든 유저가 다시 채널을 볼 수 있게 합니다.
  - 상황이 종료되었음을 알립니다.

---

### ⚠️ 주의사항 (관리자)
- **Notice Lockdown**은 채널 권한(Permission Overwrites)을 수정하므로, 서버 규모가 크거나 권한 설정이 복잡한 경우 주의해서 사용해야 합니다.
- 봇에게 `Manage Channels` (채널 관리) 및 `Manage Roles` (역할 관리) 권한이 있어야 정상 작동합니다.
