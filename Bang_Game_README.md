# 🎯 Bang 게임 안내서 (Discord Slash Command)

디스코드에서 즐기는 1:1 서부 총잡이 대결 게임 **"Bang"** 에 오신 것을 환영합니다!  
이 문서는 일반 사용자를 위한 설명서로, 각 명령어의 기능과 동작 흐름, 출력 예시를 제공합니다.  

---

## ⚡ 명령어 설명

### `/bang opponent:<상대> bet:<금액>`
> 1:1로 상대와 대결을 진행합니다.  
> 베팅 금액을 걸고, 운에 따라 승패가 결정됩니다.

- **opponent**: 대결 상대를 선택합니다. (자기 자신은 불가)
- **bet**: 베팅 금액 (100~1000 사이만 허용)

💡 **기본 승률:** 유저 기준 55% (관리자가 변경 가능)

---

### `/bang_stats`
> Bang 게임의 전체, 월간, 주간 통계를 보여줍니다.

- 전체 누적 승리 1위
- 이번 달 TOP 3
- 최근 7일 TOP 3

---

### `/bang_recent [limit]`
> 최근 진행된 게임 기록을 확인합니다.

- `limit`: 최근 몇 개의 게임을 볼지 선택 (기본값: 20)
- 페이지 버튼을 눌러 이전/다음 페이지로 이동 가능

---

### `/bang_getchance`
> 현재 설정된 유저 승률(%)을 확인합니다.

---

### `/bang_setchance chance:<숫자>` *(관리자 전용)*
> 게임의 승률을 변경합니다.  
> 1~99 사이의 정수로 설정할 수 있습니다.

---

## 🧩 로직 개요

1. **게임 요청**
   - `/bang` 명령으로 대결을 신청합니다.
   - 이미 게임이 진행 중이면 자동으로 **대기열(queue)** 에 등록됩니다.

2. **베팅 확인**
   - 두 유저 모두 잔액이 충분해야 게임이 시작됩니다.
   - 잔액이 부족하면 게임은 취소됩니다.

3. **카운트다운**
   - `3 → 2 → 1` 순서로 짧은 카운트다운 후 **Bang!**

4. **승자 결정**
   - `user_win_chance`(기본 55%) 확률로 신청자(user)가 승리합니다.
   - 승자는 **베팅 금액 × 2** 만큼 보상받습니다.
   - DB에 경기 결과가 자동 기록됩니다.

5. **통계/기록 확인**
   - `/bang_stats`로 누적, 월간, 주간 승리 TOP 유저를 확인할 수 있습니다.
   - `/bang_recent`으로 최근 게임 이력을 페이지 단위로 열람할 수 있습니다.

---

## 🧾 예상 출력 결과

### ✅ `/bang` 실행 시
```
🤠 **서부 총잡이 대결!**
@User vs @Opponent
🔫 카운트다운... 3...
🔫 카운트다운... 2...
🔫 카운트다운... 1...
💥 **Bang!**
🏆 승자: @User
💰 200원을 획득했습니다!
💀 패자: @Opponent
📊 현재 승률 설정: 55% (user 기준)
```

---

### 📊 `/bang_stats` 실행 시
```
🎯 Bang 게임 통계 요약

🥇 전체 누적 1위: @Cowboy (52승)

🏆 이번 달 TOP 3
1. @Cowboy — 15승
2. @Sheriff — 12승
3. @Outlaw — 9승

📈 최근 7일 TOP 3
1. @Cowboy — 6승
2. @Bandit — 5승
3. @Deputy — 4승
```

---

### 🕒 `/bang_recent` 실행 시
```
🕒 최근 게임 기록 (페이지 1/2)

2025-10-29 18:34 KST
🏆 @UserA 승리 vs @UserB — 💰 베팅 200

2025-10-29 18:30 KST
🏆 @UserC 승리 vs @UserD — 💰 베팅 500

⬅️ 또는 ➡️ 버튼으로 페이지 이동
```

---

### 📈 `/bang_getchance`
```
📊 현재 유저 승률은 55% 입니다.
```

---

### ⚙️ `/bang_setchance 70`
```
✅ 승률이 70%로 설정되었습니다.
```

---

## 🎮 요약

| 명령어 | 기능 | 권한 |
|:--------|:------|:------|
| `/bang` | 상대와 1:1 대결 | 일반 사용자 |
| `/bang_stats` | 전체/월간/주간 통계 보기 | 일반 사용자 |
| `/bang_recent` | 최근 경기 기록 보기 | 일반 사용자 |
| `/bang_getchance` | 현재 승률 보기 | 일반 사용자 |
| `/bang_setchance` | 승률 설정 | 관리자 전용 |

---

> 💬 **Tip:**  
> 대결은 순차적으로 진행되며, 현재 게임이 끝나면 자동으로 대기열에 등록된 순서대로 다음 경기가 시작됩니다.
